<!DOCTYPE html>
<meta charset="utf-8"/>
<html>
<title>Wand App</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3pro.css">

<head>
  <script src="https://unpkg.com/mqtt/dist/mqtt.min.js" type="text/javascript"></script>
</head>

<body>
<div class="w3-container w3-card">
  <h1>Internet of Wands</h1>
</div>

<table class="table table-striped table-bordered">
  <tr>
    <td>API used</td>
    <td id="moApi"></td>
  </tr>
  <tr>
    <td>acceleration</td>
    <td id="moAccel"></td>
  </tr>
  <tr>
    <td>rotation rate</td>
    <td id="moRotation"></td>
  </tr>
  <tr>
    <td>interval (ms)</td>
    <td id="moInterval"></td>
  </tr>
  <tr>
    <td>recording</td>
    <td id="recording"></td>
  </tr>
  <tr>
    <td>n_accel_steps</td>
    <td id="n_accel_steps"></td>
  </tr>
  <tr>
    <td>n_gyro_steps</td>
    <td id="n_gyro_steps"></td>
  </tr>
</table>

<script type = "text/javascript" src = "js/sensors.js" ></script>

<input type="button" id="record_button" value="Record Spell"/>

<script>


function start_record(event) {
  accel_data = {timestamp : [], x : [], y : [], z : []}
  gyro_data =  {timestamp : [], x : [], y : [], z : []}
  init_sensors();
  document.getElementById('recording').innerHTML = 'Yes';
}

function stop_record(event) {
  document.getElementById('n_accel_steps').innerHTML = accel_data.timestamp.length;
  document.getElementById('n_gyro_steps').innerHTML = gyro_data.timestamp.length;
  document.getElementById('recording').innerHTML = 'No';
  stop_sensors();
}

  record_button = document.getElementById("record_button")
  
  record_button.addEventListener("touchstart", start_record, {passive: true})
  record_button.addEventListener("touchend", stop_record, {passive: true})


</script>

</body>